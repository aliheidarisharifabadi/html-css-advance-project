<?php

use App\Http\Resources\ActionResource;
use App\Models\User\User;
use Hekmatinasser\Verta\Verta;
use Intervention\Image\Facades\Image;

/**
 * @param integer|NULL $id
 * @return integer|NULL
 */
function provider(int $id = NULL)
{
	if (is_null($id)) {
		return User::findOrFail($id)->provider_id;
	}

	/** @var User $user */
	$user = auth()->user();

	return $user->provider_id;
}

/**
 * @param $templateCode
 * @param $mobileNumber
 * @param $verifyCode
 * @return mixed
 */
function sendSMS($templateCode, $mobileNumber, $verifyCode)
{
	$client = new SoapClient(env('SMS_URI'));
	$user = env('SMS_UNAME');
	$pass = env('SMS_PASS');
	$fromNum = env('SMS_FROM');
	$toNum = array($mobileNumber);
	$pattern_code = $templateCode;
	$input_data = array("code" => $verifyCode);
	$resultCode = $client->sendPatternSms($fromNum, $toNum, $user, $pass, $pattern_code, $input_data);
	return $resultCode;
}

/**
 * @param string $wsdl
 * @param string $username
 * @param string $password
 * @param string $serverId
 * @param string $phone
 * @param string $message
 * @return mixed
 */
function makeCall(string $wsdl, string $username, string $password, string $serverId, string $phone, string $message)
{
	/** @var SoapClient $client */
	$client = new SoapClient($wsdl);

	/** @var array $param */
	$param = array(
		'userName' => $username,
		'password' => $password,
		'text'     => $message,
		'number'   => $phone,
		'vote'     => false,
		'serverid' => $serverId,
	);

	return $client->QuickSendWithTTS($param);
}

/**
 * @param string|NULL $message
 * @param bool        $success
 * @param array       $data
 * @return ActionResource
 */
function ActionResource(string $message = NULL, bool $success = true, array $data = [])
{
	return new ActionResource($message, $success, $data);
}

/**
 * @param $num
 * @return string
 */
function fa_num($num)
{
	return str_replace(
		range(0, 9),
		['Û°', 'Û±', 'Û²', 'Û³', 'Û´', 'Ûµ', 'Û¶', 'Û·', 'Û¸', 'Û¹'],
		$num);
}

/**
 * @param string $date
 * @param bool   $array
 * @return string|void
 * @throws Exception
 */
function g2j(string $date, bool $array = false)
{
	$date = explode('-', $date);

	if (count($date) != 3) {
		throw new Exception("Date in invalid!");
		return;
	}

	$date = Verta::getGregorian((int)$date[0], (int)$date[1], (int)$date[2]);

	return $array ? $date : implode('-', $date);
}

function letters($text)
{
	$from = $to = array();
	$from[] = array(
		'Ø†', 'Ø‡', 'Øˆ', 'Ø‰', 'ØŠ', 'Ø', 'Ø', 'Ø', 'Ø‘', 'Ø’', 'Ø“', 'Ø”', 'Ø•',
		'Ø–', 'Ø˜', 'Ø™', 'Øš', 'Ø', 'Ù–', 'Ù—', 'Ù˜', 'Ù™', 'Ùš', 'Ù›', 'Ùœ', 'Ù', 'Ù', 'ÙŸ', 'Ùª',
		'Ù¬', 'Ù­', 'Û', 'Û‚', 'Ûƒ', 'Û”', 'Û–', 'Û—', 'Û˜', 'Û™', 'Ûš', 'Û›', 'Ûœ', 'Û', 'ÛŸ', 'Û ',
		'Û¡', 'Û¢', 'Û£', 'Û¤', 'Û¥', 'Û¦', 'Û§', 'Û¨', 'Û©', 'Ûª', 'Û«', 'Û¬', 'Û­', 'Û®', 'Û¯', 'ï®§',
		'ï®²', 'ï®³', 'ï®´', 'ï®µ', 'ï®¶', 'ï®·', 'ï®¸', 'ï®¹', 'ï®º', 'ï®»', 'ï®¼', 'ï®½', 'ï®¾', 'ï®¿', 'ï¯€', 'ï¯', 'ï±',
		'ï±Ÿ', 'ï± ', 'ï±¡', 'ï±¢', 'ï±£', 'ï¹°', 'ï¹±', 'ï¹²', 'ï¹³', 'ï¹´', 'ï¹¶', 'ï¹·', 'ï¹¸', 'ï¹¹', 'ï¹º', 'ï¹»', 'ï¹¼', 'ï¹½',
		'ï¹¾', 'ï¹¿',
	);
	$to[] = '';
	$from[] = array(
		'Ø£', 'Ø¥', 'Ù±', 'Ù²', 'Ù³', 'Ùµ', 'İ³', 'İ´', 'ï­', 'ï­‘', 'ïºƒ', 'ïº„', 'ïº‡', 'ïºˆ',
		'ïº', 'ïº', 'ğº€', 'ï´¼', 'ï´½', 'ğ¸€',
	);
	$to[] = 'Ø§';
	$from[] = array(
		'Ù®', 'İ•', 'İ–', 'ï­’', 'ï­“', 'ï­”', 'ï­•', 'ïº', 'ïº', 'ïº‘', 'ïº’', 'ğ¸', 'ğ¸œ',
		'ğ¸¡', 'ğ¹¡', 'ğ¹¼', 'ğº', 'ğº¡',
	);
	$to[] = 'Ø¨';
	$from[] = array('Ú€', 'İ', 'İ”', 'ï­–', 'ï­—', 'ï­˜', 'ï­™', 'ï­š', 'ï­›', 'ï­œ', 'ï­');
	$to[] = 'Ù¾';
	$from[] = array(
		'Ù¹', 'Ùº', 'Ù»', 'Ù¼', 'İ“', 'ï­', 'ï­Ÿ', 'ï­ ', 'ï­¡', 'ï­¢', 'ï­£', 'ï­¤', 'ï­¥',
		'ï­¦', 'ï­§', 'ï­¨', 'ï­©', 'ïº•', 'ïº–', 'ïº—', 'ïº˜', 'ğ¸•', 'ğ¸µ', 'ğ¹µ', 'ğº•', 'ğºµ',
	);
	$to[] = 'Øª';
	$from[] = array('Ù½', 'Ù¿', 'İ‘', 'ïº™', 'ïºš', 'ïº›', 'ïºœ', 'ğ¸–', 'ğ¸¶', 'ğ¹¶', 'ğº–', 'ğº¶');
	$to[] = 'Ø«';
	$from[] = array(
		'Úƒ', 'Ú„', 'ï­²', 'ï­³', 'ï­´', 'ï­µ', 'ï­¶', 'ï­·', 'ï­¸', 'ï­¹', 'ïº', 'ïº', 'ïºŸ',
		'ïº ', 'ğ¸‚', 'ğ¸¢', 'ğ¹‚', 'ğ¹¢', 'ğº‚', 'ğº¢',
	);
	$to[] = 'Ø¬';
	$from[] = array(
		'Ú‡', 'Ú¿', 'İ˜', 'ï­º', 'ï­»', 'ï­¼', 'ï­½', 'ï­¾', 'ï­¿', 'ï®€', 'ï®',
		'ğ¸ƒ', 'ğºƒ',
	);
	$to[] = 'Ú†';
	$from[] = array(
		'Ú', 'İ®', 'İ¯', 'İ²', 'İ¼', 'ïº¡', 'ïº¢', 'ïº£', 'ïº¤', 'ğ¸‡', 'ğ¸§', 'ğ¹‡', 'ğ¹§',
		'ğº‡', 'ğº§',
	);
	$to[] = 'Ø­';
	$from[] = array('Ú‚', 'Ú…', 'İ—', 'ïº¥', 'ïº¦', 'ïº§', 'ïº¨', 'ğ¸—', 'ğ¸·', 'ğ¹—', 'ğ¹·', 'ğº—', 'ğº·');
	$to[] = 'Ø®';
	$from[] = array(
		'Úˆ', 'Ú‰', 'ÚŠ', 'ÚŒ', 'Ú', 'Ú', 'Ú', 'Ú', 'İ™', 'İš', 'ïº©', 'ïºª', 'ğº£', 'ï®‚',
		'ï®ƒ', 'ï®ˆ', 'ï®‰',
	);
	$to[] = 'Ø¯';
	$from[] = array('ï±›', 'ï±', 'ïº«', 'ïº¬', 'ğ¸˜', 'ğº˜', 'ğº¸', 'ï®„', 'ï®…', 'ï®†', 'ï®‡');
	$to[] = 'Ø°';
	$from[] = array(
		'Ù«', 'Ú‘', 'Ú’', 'Ú“', 'Ú”', 'Ú•', 'Ú–', 'İ›', 'İ¬', 'ï®Œ', 'ï®', 'ï±œ', 'ïº­', 'ïº®',
		'ğ¸“', 'ğº“', 'ğº³',
	);
	$to[] = 'Ø±';
	$from[] = array('Ú—', 'Ú™', 'İ«', 'İ±', 'ïº¯', 'ïº°', 'ğ¸†', 'ğº†', 'ğº¦');
	$to[] = 'Ø²';
	$from[] = array('ï®Š', 'ï®‹', 'Ú˜');
	$to[] = 'Ú˜';
	$from[] = array('Úš', 'İ½', 'İ¾', 'ïº±', 'ïº²', 'ïº³', 'ïº´', 'ğ¸', 'ğ¸®', 'ğ¹', 'ğ¹®', 'ğº', 'ğº®');
	$to[] = 'Ø³';
	$from[] = array(
		'Ú›', 'Ûº', 'İœ', 'İ­', 'İ°', 'ïºµ', 'ïº¶', 'ïº·', 'ïº¸', 'ğ¸”', 'ğ¸´', 'ğ¹”', 'ğ¹´',
		'ğº”', 'ğº´',
	);
	$to[] = 'Ø´';
	$from[] = array('Ú', 'ïº¹', 'ïºº', 'ïº»', 'ïº¼', 'ğ¸‘', 'ğ¹‘', 'ğ¸±', 'ğ¹±', 'ğº‘', 'ğº±');
	$to[] = 'Øµ';
	$from[] = array('Ú', 'Û»', 'ïº½', 'ïº¾', 'ïº¿', 'ï»€', 'ğ¸™', 'ğ¸¹', 'ğ¹™', 'ğ¹¹', 'ğº™', 'ğº¹');
	$to[] = 'Ø¶';
	$from[] = array('ï»', 'ï»‚', 'ï»ƒ', 'ï»„', 'ğ¸ˆ', 'ğ¹¨', 'ğºˆ', 'ğº¨');
	$to[] = 'Ø·';
	$from[] = array('ÚŸ', 'ï»…', 'ï»†', 'ï»‡', 'ï»ˆ', 'ğ¸š', 'ğ¹º', 'ğºš', 'ğºº');
	$to[] = 'Ø¸';
	$from[] = array('Ø', 'Ú ', 'ï»‰', 'ï»Š', 'ï»‹', 'ï»Œ', 'ğ¸', 'ğ¸¯', 'ğ¹', 'ğ¹¯', 'ğº', 'ğº¯');
	$to[] = 'Ø¹';
	$from[] = array(
		'Û¼', 'İ', 'İ', 'İŸ', 'ï»', 'ï»', 'ï»', 'ï»', 'ğ¸›', 'ğ¸»', 'ğ¹›', 'ğ¹»', 'ğº›',
		'ğº»',
	);
	$to[] = 'Øº';
	$from[] = array(
		'Ø‹', 'Ú¡', 'Ú¢', 'Ú£', 'Ú¤', 'Ú¥', 'Ú¦', 'İ ', 'İ¡', 'ï­ª', 'ï­«', 'ï­¬', 'ï­­',
		'ï­®', 'ï­¯', 'ï­°', 'ï­±', 'ï»‘', 'ï»’', 'ï»“', 'ï»”', 'ğ¸', 'ğ¸', 'ğ¸°', 'ğ¹°', 'ğ¹¾', 'ğº', 'ğº°',
	);
	$to[] = 'Ù';
	$from[] = array(
		'Ù¯', 'Ú§', 'Ú¨', 'ï»•', 'ï»–', 'ï»—', 'ï»˜', 'ğ¸’', 'ğ¸Ÿ', 'ğ¸²', 'ğ¹’', 'ğ¹Ÿ', 'ğ¹²',
		'ğº’', 'ğº²', 'Øˆ',
	);
	$to[] = 'Ù‚';
	$from[] = array(
		'Ø»', 'Ø¼', 'Ùƒ', 'Úª', 'Ú«', 'Ú¬', 'Ú­', 'Ú®', 'İ¢', 'İ£', 'İ¤', 'İ¿', 'ï®',
		'ï®', 'ï®', 'ï®‘', 'ï¯“', 'ï¯”', 'ï¯•', 'ï¯–', 'ï»™', 'ï»š', 'ï»›', 'ï»œ', 'ğ¸Š', 'ğ¸ª', 'ğ¹ª',
	);
	$to[] = 'Ú©';
	$from[] = array(
		'Ú°', 'Ú±', 'Ú²', 'Ú³', 'Ú´', 'ï®’', 'ï®“', 'ï®”', 'ï®•', 'ï®–', 'ï®—', 'ï®˜', 'ï®™', 'ï®š',
		'ï®›', 'ï®œ', 'ï®',
	);
	$to[] = 'Ú¯';
	$from[] = array(
		'Úµ', 'Ú¶', 'Ú·', 'Ú¸', 'İª', 'ï»', 'ï»', 'ï»Ÿ', 'ï» ', 'ğ¸‹', 'ğ¸«', 'ğ¹‹', 'ğº‹',
		'ğº«',
	);
	$to[] = 'Ù„';
	$from[] = array('Û¾', 'İ¥', 'İ¦', 'ï»¡', 'ï»¢', 'ï»£', 'ï»¤', 'ğ¸Œ', 'ğ¸¬', 'ğ¹¬', 'ğºŒ', 'ğº¬');
	$to[] = 'Ù…';
	$from[] = array(
		'Ú¹', 'Úº', 'Ú»', 'Ú¼', 'Ú½', 'İ§', 'İ¨', 'İ©', 'ï®', 'ï®Ÿ', 'ï® ', 'ï®¡', 'ï»¥', 'ï»¦',
		'ï»§', 'ï»¨', 'ğ¸', 'ğ¸', 'ğ¸­', 'ğ¹', 'ğ¹', 'ğ¹­', 'ğº', 'ğº­',
	);
	$to[] = 'Ù†';
	$from[] = array(
		'Ø¤', 'Ù¶', 'Ù·', 'Û„', 'Û…', 'Û†', 'Û‡', 'Ûˆ', 'Û‰', 'ÛŠ', 'Û‹', 'Û', 'İ¸', 'İ¹',
		'ï¯—', 'ï¯˜', 'ï¯™', 'ï¯š', 'ï¯›', 'ï¯œ', 'ï¯', 'ï¯', 'ï¯Ÿ', 'ï¯ ', 'ï¯¡', 'ï¯¢', 'ï¯£', 'ïº…', 'ïº†', 'ï»­', 'ï»®',
		'ğ¸…', 'ğº…', 'ğº¥',
	);
	$to[] = 'Ùˆ';
	$from[] = array(
		'Ø©', 'Ú¾', 'Û€', 'Û•', 'Û¿', 'ï®¤', 'ï®¥', 'ï®¦', 'ï®©', 'ï®¨', 'ï®ª', 'ï®«', 'ï®¬', 'ï®­',
		'ïº“', 'ïº”', 'ï»©', 'ï»ª', 'ï»«', 'ï»¬', 'ğ¸¤', 'ğ¹¤', 'ğº„',
	);
	$to[] = 'Ù‡';
	$from[] = array(
		'Ø ', 'Ø½', 'Ø¾', 'Ø¿', 'Ù‰', 'ÙŠ', 'Ù¸', 'Û', 'Û', 'Û', 'Û‘', 'Û’', 'Û“',
		'İµ', 'İ¶', 'İ·', 'İº', 'İ»', 'ï®¢', 'ï®£', 'ï®®', 'ï®¯', 'ï®°', 'ï®±', 'ï¯¤', 'ï¯¥', 'ï¯¦', 'ï¯§', 'ï¯¨',
		'ï¯©', 'ï¯¼', 'ï¯½', 'ï¯¾', 'ï¯¿', 'ïº‰', 'ïºŠ', 'ïº‹', 'ïºŒ', 'ï»¯', 'ï»°', 'ï»±', 'ï»²', 'ï»³', 'ï»´', 'ğ¸‰', 'ğ¸©',
		'ğ¹‰', 'ğ¹©', 'ğº‰', 'ğº©',
	);
	$to[] = 'ÛŒ';
	$from[] = array('Ù´', 'Û½', 'ïº€');
	$to[] = 'Ø¡';
	$from[] = array('ï»µ', 'ï»¶', 'ï»·', 'ï»¸', 'ï»¹', 'ï»º', 'ï»»', 'ï»¼');
	$to[] = 'Ù„Ø§';
	$from[] = array(
		'ï·²', 'ï·¼', 'ï·³', 'ï·´', 'ï·µ', 'ï·¶', 'ï··', 'ï·¸',
		'ï·¹', 'ï·º', 'ï·»',
	);
	$to[] = array(
		'Ø§Ù„Ù„Ù‡', 'Ø±ÛŒØ§Ù„', 'Ø§Ú©Ø¨Ø±', 'Ù…Ø­Ù…Ø¯', 'ØµÙ„Ø¹Ù…', 'Ø±Ø³ÙˆÙ„', 'Ø¹Ù„ÛŒÙ‡', 'ÙˆØ³Ù„Ù…',
		'ØµÙ„ÛŒ', 'ØµÙ„ÛŒ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÛŒÙ‡ ÙˆØ³Ù„Ù…', 'Ø¬Ù„ Ø¬Ù„Ø§Ù„Ù‡',
	);

	for ($i = 0; $i < count($from); $i++) {
		$text = str_replace($from[$i], $to[$i], $text);
	}

	return $text;
}

